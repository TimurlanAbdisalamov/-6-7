{"ast":null,"code":"import { createAction, createReducer } from \"@reduxjs/toolkit\";\nimport axios from 'axios';\nconst GET_CATEGORIES = 'GET_CATEGORIES';\nconst ADD_CART = 'ADD_CART';\nconst DECREMENT_CART = 'DECREMENT_CART';\nconst DELETE_CART = 'DELETE_CART';\nexport const getCategories = () => {\n  let action = createAction(GET_CATEGORIES);\n  return dispatch => {\n    axios('https://fakestoreapi.com/products/categories').then(({\n      data\n    }) => dispatch(action(data)));\n  };\n};\nexport const addCart = createAction(ADD_CART);\nexport const decrementCart = createAction(DECREMENT_CART);\nexport const deleteCart = createAction(DELETE_CART);\nconst initialState = {\n  categories: [],\n  cart: JSON.parse(localStorage.getItem('cart')) || []\n};\nconst saveCartToLocalStorage = cart => {\n  localStorage.setItem('cart', JSON.stringify(cart));\n};\nexport default createReducer(initialState, builder => {\n  builder.addCase(GET_CATEGORIES, (state, action) => {\n    state.categories = action.payload;\n  }).addCase(ADD_CART, (state, action) => {\n    let object = action.payload;\n    const idx = state.cart.findIndex(item => object.id === item.id);\n    if (idx < 0) {\n      state.cart = [{\n        ...object,\n        count: 1\n      }, ...state.cart];\n    } else {\n      state.cart[idx].count++;\n      state.cart = [...state.cart];\n    }\n    saveCartToLocalStorage(state.cart);\n  }).addCase(DECREMENT_CART, (state, action) => {\n    let object = action.payload;\n    const idx = state.cart.findIndex(item => object.id === item.id);\n    if (state.cart[idx].count > 1) {\n      state.cart[idx].count--;\n      state.cart = [...state.cart];\n    }\n    saveCartToLocalStorage(state.cart);\n  }).addCase(DELETE_CART, (state, action) => {\n    state.cart = state.cart.filter(item => item.id !== action.payload.id);\n    saveCartToLocalStorage(state.cart);\n  });\n});","map":{"version":3,"names":["createAction","createReducer","axios","GET_CATEGORIES","ADD_CART","DECREMENT_CART","DELETE_CART","getCategories","action","dispatch","then","data","addCart","decrementCart","deleteCart","initialState","categories","cart","JSON","parse","localStorage","getItem","saveCartToLocalStorage","setItem","stringify","builder","addCase","state","payload","object","idx","findIndex","item","id","count","filter"],"sources":["C:/Users/Welcome/Desktop/shop26-1/src/redux/reducer.js"],"sourcesContent":["import { createAction, createReducer } from \"@reduxjs/toolkit\";\r\nimport axios from 'axios';\r\n\r\nconst GET_CATEGORIES = 'GET_CATEGORIES';\r\nconst ADD_CART = 'ADD_CART';\r\nconst DECREMENT_CART = 'DECREMENT_CART';\r\nconst DELETE_CART = 'DELETE_CART';\r\n\r\nexport const getCategories = () => {\r\n  let action = createAction(GET_CATEGORIES);\r\n  return (dispatch) => {\r\n    axios('https://fakestoreapi.com/products/categories')\r\n      .then(({ data }) => dispatch(action(data)))\r\n  }\r\n};\r\n\r\nexport const addCart = createAction(ADD_CART);\r\nexport const decrementCart = createAction(DECREMENT_CART);\r\nexport const deleteCart = createAction(DELETE_CART);\r\n\r\nconst initialState = {\r\n  categories: [],\r\n  cart: JSON.parse(localStorage.getItem('cart')) || [],\r\n};\r\n\r\nconst saveCartToLocalStorage = (cart) => {\r\n  localStorage.setItem('cart', JSON.stringify(cart));\r\n};\r\n\r\nexport default createReducer(initialState, (builder) => {\r\n  builder\r\n    .addCase(GET_CATEGORIES, (state, action) => {\r\n      state.categories = action.payload;\r\n    })\r\n    .addCase(ADD_CART, (state, action) => {\r\n      let object = action.payload;\r\n      const idx = state.cart.findIndex(item => object.id === item.id);\r\n      if (idx < 0) {\r\n        state.cart = [{\r\n          ...object,\r\n          count: 1\r\n        }, ...state.cart];\r\n      } else {\r\n        state.cart[idx].count++;\r\n        state.cart = [...state.cart];\r\n      }\r\n      saveCartToLocalStorage(state.cart); \r\n    })\r\n    .addCase(DECREMENT_CART, (state, action) => {\r\n      let object = action.payload;\r\n      const idx = state.cart.findIndex(item => object.id === item.id);\r\n      if (state.cart[idx].count > 1) {\r\n        state.cart[idx].count--;\r\n        state.cart = [...state.cart];\r\n      }\r\n      saveCartToLocalStorage(state.cart); \r\n    })\r\n    .addCase(DELETE_CART, (state, action) => {\r\n      state.cart = state.cart.filter(item => item.id !== action.payload.id);\r\n      saveCartToLocalStorage(state.cart); \r\n    });\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}